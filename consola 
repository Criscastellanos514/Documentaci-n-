dotnet add package Dapper
dotnet add package Microsoft.Data.SqlClient
dotnet add package Microsoft.Extensions.Hosting
dotnet add package Microsoft.Extensions.Configuration.Json
dotnet add package Microsoft.Extensions.Logging.Console


{
  "ConnectionStrings": {
    "Default": "Server=TU_SERVER;Database=control_inventario_ti;Trusted_Connection=True;TrustServerCertificate=True;"
  },
  "Worker": {
    "IntervalSeconds": 10,
    "DryRun": false
  }
}

using System.Data;
using Microsoft.Data.SqlClient;
using Microsoft.Extensions.Configuration;

namespace ManageAdmin.ApprovalWorker.Infrastructure;

public class Db
{
    private readonly IConfiguration _config;

    public Db(IConfiguration config)
    {
        _config = config;
    }

    public IDbConnection CreateConnection()
    {
        var cs = _config.GetConnectionString("Default");
        return new SqlConnection(cs);
    }
}